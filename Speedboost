local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")

local PlaceId = game.PlaceId
local player = Players.LocalPlayer

-- Table to store already visited server IDs
local visitedServers = {}

local function getServerList()
    local servers = {}
    local url = "https://games.roblox.com/v1/games/"..PlaceId.."/servers/Public?sortOrder=Asc&limit=100"
    local success, response = pcall(function()
        return game:HttpGet(url)
    end)

    if success then
        local data = HttpService:JSONDecode(response)
        for _, server in ipairs(data.data) do
            if server.playing < server.maxPlayers and not visitedServers[server.id] then
                table.insert(servers, server)
            end
        end
    end

    return servers
end

local function hopServer()
    local servers = getServerList()
    if #servers == 0 then
        warn("No available servers to join!")
        return
    end

    -- Pick a random server from available ones
    local server = servers[math.random(1, #servers)]
    visitedServers[server.id] = true

    print("Teleporting to server: "..server.id.." ("..server.playing.."/"..server.maxPlayers..")")
    TeleportService:TeleportToPlaceInstance(PlaceId, server.id, player)
end

-- Example usage
hopServer()
